<header id="forCart">
    <div class="yu_wrapper">
        <!-- 購物車 -->

        <div id="i_shoppingCart_bk" class="i_background" style="display:none">
            <div class="shopping-cart">
                <div class="row" >
                    <div class="col-12 shopping-cart-items" >
                        <div class="row-md-4 -title">
                            <span>購物清單</span>
                            <button type="button" class="btn-close" id="btn-cart-close"></button>
                        </div>

                        <div class="cart" class="row" >

                        </div>
                    </div>
                </div>
                <div class="goCart">
                    <a class="btncheckS1" href="./checkout1.html">前往結帳</a>
                </div>
            </div>
        </div>
        <div class="h_logo">
            <a href="./index.html"><img src="./img/logo.png" alt=""></a>
        </div>
        <div class="h_navbar">
            <div class="h_nav">
                <ul>
                    <li><a href="./login.html"><i class="fa-solid fa-user head_icon"></i></a></li>
                    <li><a @click="openCart" id="i_shoppingCart" href="#">
                            <i class="fa-solid fa-cart-shopping head_icon"></i>
                        </a></li>

                </ul>
                <nav>
                    <button class="hamburger hamburger--squeeze" type="button">
                        <span class="hamburger-box">
                            <span class="hamburger-inner"></span>
                        </span>
                    </button>
                    <div class="nav-list">
                        <ul class="nav_top">
                            <ol><a href="./index.html">首頁</a></ol>
                            <ol><a href="./about.html">關於畫廊</a></ol>
                            <ol><a href="./online_gallery.html">線上畫廊</a></ol>
                            <ol><a href="./exhibition.html">當今展覽</a></ol>
                            <ol class="sub-nav">藝術體驗<i id="tg1" class="fas fa-plus-square"></i>
                                <li><a href="./puzzle_choice.html" target="_blank">拼圖遊戲</a></li>
                                <li><a href="./psychol_test.html" id="sub-nav_color2">心理測驗</a></li>
                            </ol>
                            <ol><a href="./shop.html">商品總覽</a></ol>
                            <ol class="sub-nav2">會員中心<i id="tg2" class="fas fa-plus-square"></i>
                                <li><a href="./login.html">註冊/登入</a></li>
                                <li><a href="./member.html">訂單查詢</a></li>
                            </ol>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>

    </div>

</header>
<script>
    new Vue({
        el: '#forCart',
        // data: data,
        data: {
            isShowingCart: false,
            products: [
                {
                    id: '2062',
                    title: '',
                    price: 1000,
                    thumb: './img/Shop/products/D/p1.png',
                    amount: 0,
                    amountShow: 1,
                    showingIcon: false
                },
            ]

        },
        mounted() {

        },
        methods: {

            //======開啟購物車======
            openCart() {

                // 顯示購物車
                var shoppingcartbk = document.getElementById('i_shoppingCart_bk');
                if (shoppingcartbk.style.display === 'none') {
                    shoppingcartbk.style.display = 'block';
                };
               

                //可以試著用toggle
                var close = document.getElementsByClassName('btn-close');
                for (let i = 0; i < close.length; i++) {
                    close[i].addEventListener('click', function () {
                        if (this.closest('.i_background').style.display === 'block') {
                            this.closest('.i_background').style.display = 'none';
                        }
                    });
                };


                if (itemList != "") {
                    console.log(itemList);
                    let cart = {
                        // item_id: product.PRODUCT_ID,
                        'item_img': img,
                        'item_name': title,
                        // item_count: product.count,
                        'item_price': price,
                        // item_total_price: product.PRODUCT_PRICE,
                    };
                }

            },

            // 點擊 - / + 後的動作
            minusOne(product) {
                product.amountShow--
                product.amountShow = (product.amountShow < 1) ? 1 : product.amountShow
            },
            addOne(product) {
                product.amountShow++
                product.amountShow = (product.amountShow > 9) ? 9 : product.amountShow
            },

            // 點擊 add to cart 後的動作
            addToCart(product) {
                product.amount += product.amountShow

                product.showingIcon = true
                setTimeout(() => {
                    product.showingIcon = false
                }, 800)
            },

            // 在購物車裡移除單一品項 ( 把數量設置成 0 )
            remove(product) {
                product.amount = 0
            },


            // computed: {
            // // 購物車裡的品項
            // productsInCart () {
            //     return this.products
            //         // 只顯示購買數量 > 0 的項目
            //         .filter(p => p.amount)
            //         // 算出每個產品的小計
            //         .map(p => {
            //             p.sum = p.amount * p.price
            //             return p
            //         })

            // },

            // // 木前購買的金額
            // total () {
            //     return this.productsInCart
            //         .reduce((sum, p) => (sum + p.sum), 0)
            //  }
            // },
        },


    });


</script>
<!-- <script src="./js/header_copy.min.js"></script> -->


<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" referrerpolicy="no-referrer"></script> -->